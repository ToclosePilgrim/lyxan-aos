# –û—Ç—á—ë—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Support Module v0 - –¢–ó ‚Ññ13

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–µ–ª–µ–π Prisma ‚úÖ
–ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –º–æ–¥–µ–ª–∏:
- ‚úÖ `Review` ‚Äî —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Å –ø–æ–ª—è–º–∏: `id`, `skuId` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ), `rating`, `text`, `date`, `createdAt`
- ‚úÖ `SupportTicket` ‚Äî —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Å –ø–æ–ª—è–º–∏: `id`, `text`, `status`, `createdAt`, `updatedAt`
- ‚úÖ –ú–æ–¥–µ–ª—å SupportTicket –Ω–µ –∏–º–µ–µ—Ç –ø–æ–ª—è `title`, –ø–æ—ç—Ç–æ–º—É title —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –≤ `text`
- ‚úÖ –í—Å–µ –º–æ–¥–µ–ª–∏ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –ø–æ–¥ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ö–µ–º—É

### 2. Backend: SupportService ‚úÖ
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º–µ—Ç–æ–¥—ã:

**Reviews:**
- ‚úÖ `getReviews(filter?)` ‚Äî —Å–ø–∏—Å–æ–∫ –æ—Ç–∑—ã–≤–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π:
  - –ü–æ —Ç–æ—á–Ω–æ–º—É —Ä–µ–π—Ç–∏–Ω–≥—É (`rating`)
  - –ü–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–º—É —Ä–µ–π—Ç–∏–Ω–≥—É (`minRating`)
  - –ü–æ SKU (`skuId`)
  - –ü–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É –¥–∞—Ç (`dateFrom`, `dateTo`)
  - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ DESC
  
- ‚úÖ `createReview(dto)` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**Support Tickets:**
- ‚úÖ `getTickets()` ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ç–æ–≤, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ createdAt DESC
  
- ‚úÖ `getTicketById(id)` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞ —Å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ–º title –∏ body
  
- ‚úÖ `createTicket(dto)` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞ (title + text –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –≤ text)
  
- ‚úÖ `updateTicketStatus(id, dto)` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º updatedAt
  
- ‚úÖ Helper –º–µ—Ç–æ–¥—ã: `extractTitle()`, `extractBody()` ‚Äî –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è title –∏–∑ text

### 3. Backend: SupportController ‚úÖ
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã REST —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

**Reviews:**
- ‚úÖ `GET /api/support/reviews` ‚Äî —Å–ø–∏—Å–æ–∫ –æ—Ç–∑—ã–≤–æ–≤
- ‚úÖ `POST /api/support/reviews` ‚Äî —Å–æ–∑–¥–∞—Ç—å –æ—Ç–∑—ã–≤

**Tickets:**
- ‚úÖ `GET /api/support/tickets` ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ç–æ–≤
- ‚úÖ `GET /api/support/tickets/:id` ‚Äî —Ç–∏–∫–µ—Ç –ø–æ ID
- ‚úÖ `POST /api/support/tickets` ‚Äî —Å–æ–∑–¥–∞—Ç—å —Ç–∏–∫–µ—Ç
- ‚úÖ `PATCH /api/support/tickets/:id/status` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å

–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∑–∞—â–∏—â–µ–Ω—ã `JwtAuthGuard`.

### 4. Backend: DTO ‚úÖ
–°–æ–∑–¥–∞–Ω—ã DTO:
- ‚úÖ `CreateReviewDto` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞
- ‚úÖ `CreateTicketDto` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞ (title + text)
- ‚úÖ `UpdateTicketStatusDto` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Ç–∏–∫–µ—Ç–∞

### 5. Frontend: –°—Ç—Ä–∞–Ω–∏—Ü—ã ‚úÖ
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

**`/support/reviews`**
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ –æ—Ç–∑—ã–≤–æ–≤ —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏: Date, SKU, Rating, Text
- ‚úÖ –§–∏–ª—å—Ç—Ä—ã: Rating (select 1-5), Min Rating (select), SKU Code (input), Date range
- ‚úÖ –û–±—Ä–µ–∑–∫–∞ –¥–ª–∏–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø–æ–ª–Ω–æ–≥–æ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ
- ‚úÖ –°—Å—ã–ª–∫–∏ –Ω–∞ —Ç–æ–≤–∞—Ä—ã –∏–∑ –æ—Ç–∑—ã–≤–æ–≤
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ —Å –ø–æ–º–æ—â—å—é Badge

**`/support/tickets`**
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ —Ç–∏–∫–µ—Ç–æ–≤ —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏: ID, Title, Status, CreatedAt, UpdatedAt
- ‚úÖ –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∏–∫–µ—Ç–∞ (title + text)
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ —Å –ø–æ–º–æ—â—å—é Badge
- ‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ –∫ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–∏–∫–µ—Ç–µ

**`/support/tickets/[id]`**
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–∏–∫–µ—Ç–µ
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ title –∏ body –∏–∑ text
- ‚úÖ Dropdown –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ‚úÖ
- ‚úÖ –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `MainLayout`
- ‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å backend API —á–µ—Ä–µ–∑ `lib/api.ts`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è Shadcn UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Badge, Dialog, Table, Card, Button, Input, Select, Textarea)

### 7. README –æ–±–Ω–æ–≤–ª—ë–Ω ‚úÖ
- ‚úÖ Backend README —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–∞–∑–¥–µ–ª SupportModule —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º API
- ‚úÖ Frontend README —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–ø–∏—Å–∞–Ω–∏–µ Support —Å—Ç—Ä–∞–Ω–∏—Ü

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### Backend
```
backend/src/modules/support/
‚îú‚îÄ‚îÄ dto/
‚îÇ   ‚îú‚îÄ‚îÄ create-review.dto.ts
‚îÇ   ‚îú‚îÄ‚îÄ create-ticket.dto.ts
‚îÇ   ‚îî‚îÄ‚îÄ update-ticket-status.dto.ts
‚îú‚îÄ‚îÄ support.module.ts
‚îú‚îÄ‚îÄ support.service.ts
‚îî‚îÄ‚îÄ support.controller.ts
```

### Frontend
```
frontend/app/support/
‚îú‚îÄ‚îÄ page.tsx (–Ω–∞–≤–∏–≥–∞—Ü–∏—è)
‚îú‚îÄ‚îÄ reviews/
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îî‚îÄ‚îÄ tickets/
    ‚îú‚îÄ‚îÄ page.tsx
    ‚îî‚îÄ‚îÄ [id]/
        ‚îî‚îÄ‚îÄ page.tsx
```

## üìã API Endpoints

### Reviews
- `GET /api/support/reviews` ‚Äî —Å–ø–∏—Å–æ–∫ –æ—Ç–∑—ã–≤–æ–≤
- `POST /api/support/reviews` ‚Äî —Å–æ–∑–¥–∞—Ç—å –æ—Ç–∑—ã–≤

### Support Tickets
- `GET /api/support/tickets` ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ç–æ–≤
- `GET /api/support/tickets/:id` ‚Äî —Ç–∏–∫–µ—Ç –ø–æ ID
- `POST /api/support/tickets` ‚Äî —Å–æ–∑–¥–∞—Ç—å —Ç–∏–∫–µ—Ç
- `PATCH /api/support/tickets/:id/status` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ - –í–°–ï –í–´–ü–û–õ–ù–ï–ù–´

1. ‚úÖ –ö–æ–¥ –º–æ–¥—É–ª—è backend (service/controller/DTO) —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
2. ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ /support/reviews —Å–æ–∑–¥–∞–Ω–∞
3. ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ /support/tickets —Å–æ–∑–¥–∞–Ω–∞
4. ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ /support/tickets/[id] —Å–æ–∑–¥–∞–Ω–∞
5. ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –æ–ø–∏—Å–∞–Ω—ã –≤ README
6. ‚úÖ –ü—Ä–æ–µ–∫—Ç—ã –∫–æ–º–ø–∏–ª–∏—Ä—É—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–∞
```bash
curl -X POST http://localhost:3001/api/support/reviews \
  -H "Content-Type: application/json" \
  -b cookies.txt \
  -d '{
    "skuId": "sku-id",
    "rating": 5,
    "text": "Great product!",
    "date": "2025-01-15"
  }'
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞
```bash
curl -X POST http://localhost:3001/api/support/tickets \
  -H "Content-Type: application/json" \
  -b cookies.txt \
  -d '{
    "title": "Product quality issue",
    "text": "Customer reported quality issues with the product."
  }'
```

## üéØ –°—Ç–∞—Ç—É—Å

**‚úÖ Support Module v0 –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

–ú–æ–¥—É–ª—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:
- –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç–∑—ã–≤–æ–≤ –æ —Ç–æ–≤–∞—Ä–∞—Ö —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–∑—ã–≤–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞–º–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –æ–±—Ä–∞—â–µ–Ω–∏–π
- –ì–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∞–≥–µ–Ω—Ç–∞–º–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ –æ—Ç–∑—ã–≤–æ–≤ –≤ –±—É–¥—É—â–µ–º








# –û—Ç—á—ë—Ç –æ —Å–æ–∑–¥–∞–Ω–∏–∏ Prisma ERD v0 - –¢–ó ‚Ññ3

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 1. –°–æ–∑–¥–∞–Ω –ø–æ–ª–Ω—ã–π schema.prisma ‚úÖ
–°—Ö–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ —Ç—Ä–µ–±—É–µ–º—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏:
- ‚úÖ Org Structure: Country, Brand, Marketplace
- ‚úÖ Users & Roles: Role, User
- ‚úÖ SCM: Product, Sku, Stock, Supply, SupplyItem
- ‚úÖ BCM: ProductCard
- ‚úÖ Finance: FinanceReport
- ‚úÖ Advertising: AdCampaign, AdStats
- ‚úÖ Support: Review, SupportTicket
- ‚úÖ Agents: AgentScenario, AgentRun

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–µ–π, –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ —Ç–∏–ø–æ–≤ ‚úÖ
- ‚úÖ –í—Å–µ —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–∞—Å–∫–∞–¥–Ω—ã–µ —É–¥–∞–ª–µ–Ω–∏—è (CASCADE/SET NULL)

### 3. Prisma Client —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω ‚úÖ
```bash
npx prisma generate
```
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ Prisma Client —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω

### 4. SQL –º–∏–≥—Ä–∞—Ü–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ ‚úÖ
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è SQL –∏–∑ —Å—Ö–µ–º—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ. –î–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è:
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å PostgreSQL
2. –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö `aos`
3. –í—ã–ø–æ–ª–Ω–∏—Ç—å: `npx prisma migrate dev --name init`

### 5. README –æ–±–Ω–æ–≤–ª—ë–Ω ‚úÖ
–î–æ–±–∞–≤–ª–µ–Ω—ã —Ä–∞–∑–¥–µ–ª—ã:
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã –º–∏–≥—Ä–∞—Ü–∏–π
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- ‚úÖ –°–≤—è–∑–∏ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∞–º–∏

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ ERD

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞–±–ª–∏—Ü: 19

#### –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (3 —Ç–∞–±–ª–∏—Ü—ã)
1. `countries` ‚Äî –°—Ç—Ä–∞–Ω—ã
2. `brands` ‚Äî –ë—Ä–µ–Ω–¥—ã
3. `marketplaces` ‚Äî –ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å—ã

#### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (2 —Ç–∞–±–ª–∏—Ü—ã)
4. `roles` ‚Äî –†–æ–ª–∏
5. `users` ‚Äî –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

#### SCM ‚Äî Supply Chain Management (5 —Ç–∞–±–ª–∏—Ü)
6. `products` ‚Äî –¢–æ–≤–∞—Ä—ã
7. `skus` ‚Äî SKU (–µ–¥–∏–Ω–∏—Ü—ã —Ç–æ–≤–∞—Ä–∞)
8. `stocks` ‚Äî –°–∫–ª–∞–¥—ã
9. `supplies` ‚Äî –ü–æ—Å—Ç–∞–≤–∫–∏
10. `supply_items` ‚Äî –≠–ª–µ–º–µ–Ω—Ç—ã –ø–æ—Å—Ç–∞–≤–æ–∫

#### BCM ‚Äî Brand & Catalog Management (1 —Ç–∞–±–ª–∏—Ü–∞)
11. `product_cards` ‚Äî –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤

#### Finance (1 —Ç–∞–±–ª–∏—Ü–∞)
12. `finance_reports` ‚Äî –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ—Ç—á—ë—Ç—ã

#### Advertising (2 —Ç–∞–±–ª–∏—Ü—ã)
13. `ad_campaigns` ‚Äî –†–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–º–ø–∞–Ω–∏–∏
14. `ad_stats` ‚Äî –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–∫–ª–∞–º—ã

#### Support (2 —Ç–∞–±–ª–∏—Ü—ã)
15. `reviews` ‚Äî –û—Ç–∑—ã–≤—ã
16. `support_tickets` ‚Äî –¢–∏–∫–µ—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏

#### Agents (2 —Ç–∞–±–ª–∏—Ü—ã)
17. `agent_scenarios` ‚Äî –°—Ü–µ–Ω–∞—Ä–∏–∏ –∞–≥–µ–Ω—Ç–æ–≤
18. `agent_runs` ‚Äî –ó–∞–ø—É—Å–∫–∏ –∞–≥–µ–Ω—Ç–æ–≤

## üîó –ö–ª—é—á–µ–≤—ã–µ —Å–≤—è–∑–∏

### –ò–µ—Ä–∞—Ä—Ö–∏—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
```
Country ‚Üí Brand ‚Üí Marketplace ‚Üí Product ‚Üí SKU
```

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å–≤—è–∑–∏
- `Country` (1) ‚Üî (N) `Brand`
- `Brand` (1) ‚Üî (N) `Marketplace`
- `Brand` (1) ‚Üî (N) `Product`
- `Marketplace` (1) ‚Üî (N) `Product`
- `Product` (1) ‚Üî (N) `Sku`
- `Product` (1) ‚Üî (1) `ProductCard`
- `Sku` (1) ‚Üî (1) `Stock`
- `Sku` (1) ‚Üî (N) `FinanceReport`
- `Sku` (1) ‚Üî (N) `Review`

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–≤—è–∑–∏
- `Role` (1) ‚Üî (N) `User`
- `Marketplace` (1) ‚Üî (N) `AdCampaign`
- `AdCampaign` (1) ‚Üî (N) `AdStats`
- `AgentScenario` (1) ‚Üî (N) `AgentRun`

## üìã –ò–Ω–¥–µ–∫—Å—ã

–í—Å–µ–≥–æ —Å–æ–∑–¥–∞–Ω–æ **43 –∏–Ω–¥–µ–∫—Å–∞** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- –ò–Ω–¥–µ–∫—Å—ã –ø–æ –≤–Ω–µ—à–Ω–∏–º –∫–ª—é—á–∞–º
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø–æ–ª–µ–π (email, code, key)
- –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:
  - `finance_reports(skuId, date)`
  - `ad_stats(campaignId, date)`

## üöÄ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

### –®–∞–≥–∏ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ PostgreSQL:**
   ```bash
   # –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
   psql -U postgres
   CREATE DATABASE aos;
   \q
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env:**
   ```env
   DATABASE_URL="postgresql://postgres:postgres@localhost:5432/aos"
   ```

3. **–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é:**
   ```bash
   cd backend
   npx prisma migrate dev --name init
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   ```bash
   npx prisma studio
   ```

## üìÅ –§–∞–π–ª—ã

- ‚úÖ `prisma/schema.prisma` ‚Äî –ø–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ Prisma
- ‚úÖ `prisma/MIGRATION_INIT.sql` ‚Äî SQL –º–∏–≥—Ä–∞—Ü–∏—è (–¥–ª—è —Å–ø—Ä–∞–≤–∫–∏)
- ‚úÖ `README.md` ‚Äî –æ–±–Ω–æ–≤–ª—ë–Ω —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —Å—Ö–µ–º—ã

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **CUID –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã** ‚Äî –≤—Å–µ ID –∏—Å–ø–æ–ª—å–∑—É—é—Ç CUID –¥–ª—è –ª—É—á—à–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
2. **Timestamps** ‚Äî –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∏–º–µ—é—Ç `createdAt` –∏ `updatedAt`
3. **Cascade delete** ‚Äî –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–∞—Å–∫–∞–¥–Ω—ã–µ —É–¥–∞–ª–µ–Ω–∏—è
4. **JSON –ø–æ–ª—è** ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã JSONB –¥–ª—è –≥–∏–±–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö (attributes, images, input/output)
5. **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–≤—è–∑–∏** ‚Äî Product ‚Üî Marketplace, Review ‚Üî SKU, AgentRun ‚Üî AgentScenario
6. **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è** ‚Äî email, code, key –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

## üéØ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ - –í–°–ï –í–´–ü–û–õ–ù–ï–ù–´

1. ‚úÖ –ü–æ–ª–Ω—ã–π schema.prisma —Å–æ –≤—Å–µ–º–∏ —Å—É—â–Ω–æ—Å—Ç—è–º–∏
2. ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Å–≤—è–∑–µ–π, –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ —Ç–∏–ø–æ–≤
3. ‚úÖ Prisma Client —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω
4. ‚úÖ SQL –º–∏–≥—Ä–∞—Ü–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞
5. ‚úÖ README —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é –º–∏–≥—Ä–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ PostgreSQL








# –û—Ç—á—ë—Ç –æ–± –æ—á–∏—Å—Ç–∫–µ init-–º–∏–≥—Ä–∞—Ü–∏–∏ Prisma

## ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞

### –û—à–∏–±–∫–∞
```
Error: P3018
Database error code: 42601
ERROR: syntax error at or near "Ôªønode"
...
1 Ôªønode.exe : warn The configuration property `package.json#prisma` is deprecated
```

### –ü—Ä–∏—á–∏–Ω–∞
–í —Ñ–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏ `backend/prisma/migrations/20251207041950_init/migration.sql` –ø–æ–ø–∞–ª–∏:
1. **UTF-8 BOM** (Byte Order Mark) –≤ –Ω–∞—á–∞–ª–µ —Ñ–∞–π–ª–∞
2. **–°—Ç—Ä–æ–∫–∏ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞** PowerShell/Node.js —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏ Prisma (—Å—Ç—Ä–æ–∫–∏ 1-12)

### –†–µ—à–µ–Ω–∏–µ
–§–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏ –æ—á–∏—â–µ–Ω:
- ‚úÖ –£–¥–∞–ª–µ–Ω UTF-8 BOM –∏–∑ –Ω–∞—á–∞–ª–∞ —Ñ–∞–π–ª–∞
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ (—Å—Ç—Ä–æ–∫–∏ 1-12)
- ‚úÖ –§–∞–π–ª –ø–µ—Ä–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ **UTF-8 –±–µ–∑ BOM**
- ‚úÖ –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ —Ç–µ–ø–µ—Ä—å ‚Äî –≤–∞–ª–∏–¥–Ω—ã–π SQL –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: `-- CreateEnum`

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### 1. –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞
**–£–¥–∞–ª–µ–Ω—ã —Å—Ç—Ä–æ–∫–∏ 1-12:**
```
node.exe : warn The configuration property `package.json#prisma` is deprecated
and will be removed in Prisma 7. Please migrate to a Prisma config file (e.g., 
`prisma.config.ts`).
C:\Users\timof\AppData\Roaming\npm\pnpm.ps1:24 –∑–Ω–∞–∫:5
+     & "node$exe"  "$basedir/node_modules/pnpm/bin/pnpm.cjs" $args
+     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (warn The config...ma.config.ts`). 
   :String) [], RemoteException
    + FullyQualentedErrorId : NativeCommandError

For more information, see: https://pris.ly/prisma-config
```

### 2. –£–¥–∞–ª–µ–Ω–∏–µ BOM
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: —Ñ–∞–π–ª –±–æ–ª—å—à–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç UTF-8 BOM (EF BB BF)
- ‚úÖ –§–∞–π–ª –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ —Å SQL

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
- ‚úÖ –§–∞–π–ª –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å: `-- CreateEnum`
- ‚úÖ –í—Å–µ —Å—Ç—Ä–æ–∫–∏ ‚Äî –≤–∞–ª–∏–¥–Ω—ã–π SQL –∏–ª–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- ‚úÖ –ù–µ—Ç –¥—Ä—É–≥–∏—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–≤ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞
- ‚úÖ –í—Å–µ–≥–æ: 1379 —Å—Ç—Ä–æ–∫ SQL
- ‚úÖ SQL –∫–æ–º–∞–Ω–¥: 242

**–ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞:**
```sql
-- CreateEnum
CREATE TYPE "IntegrationStatus" AS ENUM ('ACTIVE', 'INACTIVE', 'ERROR');
```

**–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å—Ç—Ä–æ–∫–∏:**
```sql
-- AddForeignKey
ALTER TABLE "product_content_versions" ADD CONSTRAINT "product_content_versions_userId_fkey" FOREIGN KEY ("userId") REFERENCES "users"("id") ON DELETE SET NULL ON UPDATE CASCADE;
```

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—á–∏—â–µ–Ω–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏

–ú–∏–≥—Ä–∞—Ü–∏—è —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–Ω—ã–π SQL:

1. **–°–æ–∑–¥–∞–Ω–∏–µ enum-–æ–≤** (17 —Ç–∏–ø–æ–≤)
2. **–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü** (43 —Ç–∞–±–ª–∏—Ü—ã)
3. **–°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤** (–±–æ–ª–µ–µ 100 –∏–Ω–¥–µ–∫—Å–æ–≤)
4. **–°–æ–∑–¥–∞–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π** (–±–æ–ª–µ–µ 80 FK)

## üöÄ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
```bash
cd backend
pnpm exec prisma migrate reset --force
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è `20251207041950_init` –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–∫–∏
- ‚úÖ –í –∫–æ–Ω—Å–æ–ª–∏ –Ω–µ—Ç `syntax error near "node"`
- ‚úÖ –í—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞—é—Ç—Å—è —É—Å–ø–µ—à–Ω–æ

### Docker –ø—Ä–æ–≤–µ—Ä–∫–∞
```bash
cd infra
docker compose down -v
cd ..
pnpm docker:up
```

**–û–∂–∏–¥–∞–µ—Ç—Å—è:**
- ‚úÖ `aos-postgres` –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ `aos-backend` –ø–∏—à–µ—Ç –≤ –ª–æ–≥–∞—Ö:
  ```
  1 migration found
  Applying migration 20251207041950_init
  ```
- ‚úÖ **–ù–ï–¢ –æ—à–∏–±–æ–∫** P3018 / syntax error
- ‚úÖ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä `aos-backend` –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ `Up/healthy`

## üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- ‚úÖ `backend/prisma/migrations/20251207041950_init/migration.sql` ‚Äî –æ—á–∏—â–µ–Ω –æ—Ç –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ –∏ BOM

## üîç –ß—Ç–æ –±—ã–ª–æ –∏–∑–º–µ–Ω–µ–Ω–æ

### –î–æ:
- –§–∞–π–ª –Ω–∞—á–∏–Ω–∞–ª—Å—è —Å BOM (EF BB BF)
- –ó–∞—Ç–µ–º —à–ª–∏ 12 —Å—Ç—Ä–æ–∫ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ PowerShell/Node.js
- SQL –Ω–∞—á–∏–Ω–∞–ª—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å—Ç—Ä–æ–∫–µ 13

### –ü–æ—Å–ª–µ:
- –§–∞–π–ª –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ —Å SQL: `-- CreateEnum`
- –ù–µ—Ç BOM
- –ù–µ—Ç –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞
- –§–∞–π–ª –≤ UTF-8 –±–µ–∑ BOM

## üìù –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è PR/–∫–æ–º–º–∏—Ç–∞

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ P3018 –≤ Prisma –º–∏–≥—Ä–∞—Ü–∏–∏:**
- ‚úÖ –£–¥–∞–ª–µ–Ω—ã —Å–ª—É—á–∞–π–Ω–æ –ø–æ–ø–∞–≤—à–∏–µ —Å—Ç—Ä–æ–∫–∏ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ PowerShell/Node.js (–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ Prisma)
- ‚úÖ –£–¥–∞–ª–µ–Ω UTF-8 BOM –∏–∑ –Ω–∞—á–∞–ª–∞ —Ñ–∞–π–ª–∞
- ‚úÖ –§–∞–π–ª —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ UTF-8 –±–µ–∑ BOM
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–µ–ø–µ—Ä—å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –≤–∞–ª–∏–¥–Ω–æ–≥–æ SQL
- ‚úÖ –§–∞–π–ª –≥–æ—Ç–æ–≤ –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é –≤ Docker (`pnpm docker:up`) –±–µ–∑ –æ—à–∏–±–æ–∫ syntax error






















# E2E Tests для Backend AOS

## Настройка

E2E тесты используют Jest + Supertest для тестирования API endpoints.

## Запуск тестов

```bash
pnpm test:e2e
```

Команда `pretest:e2e` автоматически:
1. Собирает проект (`pnpm build`)
2. Настраивает тестовую БД (`pnpm db:test:setup`)

## Что проверяют тесты

### Auth тесты (`auth.e2e-spec.ts`)
- ✅ Логин с валидными креденшалами
- ✅ Отклонение невалидных креденшалов
- ✅ Получение информации о текущем пользователе

### BCM Brands тесты (`bcm-brands.e2e-spec.ts`)
- ✅ Получение списка брендов
- ✅ Создание бренда с несколькими странами
- ✅ Получение бренда по ID
- ✅ Обновление бренда с несколькими странами

## Скрипт db-test-setup

Скрипт `db:test:setup` проверяет:
1. Применение Prisma миграций
2. Запуск seed-скрипта

Если Prisma-схема и seed-скрипт не совместимы - тесты не запустятся.

## Переменные окружения

Тесты используют `DATABASE_URL` из:
1. `.env.test` (если существует)
2. `.env` (если `.env.test` не найден)
3. Системные переменные окружения

























